<div class="add-seller-container">
  <div class="header">
    <h2>Add Seller</h2>
  </div>

  <form [formGroup]="addForm" (ngSubmit)="onSubmit()" class="seller-form" autocomplete="off">
    <!-- Username -->
    <div class="form-group">
      <label for="userName">Username</label>
      <input id="userName" formControlName="userName" placeholder="Username" [class.invalid]="addForm.get('userName')?.invalid && addForm.get('userName')?.touched"  autocomplete="off"/>
      <div class="error" *ngIf="addForm.get('userName')?.invalid && addForm.get('userName')?.touched">
        Username is required (4-30 chars).
      </div>
    </div>

    <!-- Email -->
    <div class="form-group">
      <label for="email">Email</label>
      <input id="email" type="email" formControlName="email" placeholder="Email" [class.invalid]="addForm.get('email')?.invalid && addForm.get('email')?.touched" autocomplete="off" />
      <div class="error" *ngIf="addForm.get('email')?.invalid && addForm.get('email')?.touched">
        Valid email is required.
      </div>
    </div>

    <!-- Password -->
    <div class="form-group">
      <label for="password">Password</label>
      <input id="password" type="password" formControlName="password" placeholder="Password" [class.invalid]="addForm.get('password')?.invalid && addForm.get('password')?.touched" autocomplete="off" />
      <div class="error" *ngIf="addForm.get('password')?.invalid && addForm.get('password')?.touched">
        Must include uppercase, lowercase, number, and symbol.
      </div>
    </div>

    <!-- First Name -->
    <div class="form-group">
      <label for="firstName">First Name</label>
      <input id="firstName" formControlName="firstName" placeholder="First Name" [class.invalid]="addForm.get('firstName')?.invalid && addForm.get('firstName')?.touched" autocomplete="off" />
      <div class="error" *ngIf="addForm.get('firstName')?.invalid && addForm.get('firstName')?.touched">
          First Name must be 2-50 characters.
      </div>

    </div>

    <!-- Last Name -->
    <div class="form-group">
      <label for="lastName">Last Name</label>
      <input id="lastName" formControlName="lastName" placeholder="Last Name" [class.invalid]="addForm.get('lastName')?.invalid && addForm.get('lastName')?.touched" autocomplete="off" />
      <div class="error" *ngIf="addForm.get('lastName')?.invalid && addForm.get('lastName')?.touched">
          Last Name must be 2-50 characters.
      </div>
    </div>

    <!-- Phone Number -->
    <div class="form-group">
      <label for="phoneNumber">Phone Number</label>
      <input id="phoneNumber" formControlName="phoneNumber" placeholder="Phone Number" [class.invalid]="addForm.get('phoneNumber')?.invalid && addForm.get('phoneNumber')?.touched" autocomplete="off" />
      <div class="error" *ngIf="addForm.get('phoneNumber')?.invalid && addForm.get('phoneNumber')?.touched">
        Phone number must be in the format 01XXXXXXXXX.
      </div>
    </div>

    <!-- Store Name -->
    <div class="form-group">
      <label for="storeName">Store Name</label>
      <input id="storeName" formControlName="storeName" placeholder="Store Name" [class.invalid]="addForm.get('storeName')?.invalid && addForm.get('storeName')?.touched" autocomplete="off" />
      <div class="error" *ngIf="addForm.get('storeName')?.invalid && addForm.get('storeName')?.touched">
        Store Name must be 3-100 characters.
      </div>
    </div>

    <!-- Address -->
    <div class="form-group">
      <label for="address">Address</label>
      <input id="address" formControlName="address" placeholder="Address" [class.invalid]="addForm.get('address')?.invalid && addForm.get('address')?.touched" />
      <div class="error" *ngIf="addForm.get('address')?.invalid && addForm.get('address')?.touched">
        Address must be at least 5 characters.
      </div>
    </div>

    <!-- Cancelled Order % -->
    <div class="form-group">
      <label for="cancelledOrderPercentage">Cancelled Order %</label>
      <input id="cancelledOrderPercentage" type="number" step="0.01" formControlName="cancelledOrderPercentage" placeholder="e.g. 0.05" [class.invalid]="addForm.get('cancelledOrderPercentage')?.invalid && addForm.get('cancelledOrderPercentage')?.touched" />
      <div class="error" *ngIf="addForm.get('cancelledOrderPercentage')?.invalid && addForm.get('cancelledOrderPercentage')?.touched">
        Must be between 0 and 1.
        </div>
    </div>

    

    <div class="form-group">
    <label for="cityId">City</label>
    <select
      id="cityId"
      formControlName="cityId"
      [class.invalid]="addForm.get('cityId')?.invalid && addForm.get('cityId')?.touched"
    >
      <option value="" disabled hidden>Select a city</option>
      <option *ngFor="let city of cities" [value]="city.id">
        {{ city.name }}
      </option>
    </select>
      <div class="error" *ngIf="addForm.get('cityId')?.touched && addForm.get('cityId')?.invalid">
        Please select a city.
      </div>
    </div>






    <!-- Submit -->
    <div class="form-actions">
      <button type="submit"  class="add-btn" [disabled]="addForm.invalid || isSubmitting">Save</button>
    </div>

    <div *ngIf="errorMsg" class="error-msg">{{ errorMsg }}</div>
    <div *ngIf="successMsg" class="success-msg">{{ successMsg }}</div>
  </form>
</div>
